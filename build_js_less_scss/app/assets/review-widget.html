<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="css/reviews.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    .container {
      width: 100%;
      max-width: 1150px;
      padding: 0 15px;
      margin: 0 auto;
    }
    img {
      max-width: 100%;
    }
  </style>
  <script src="js/reviews.js"></script>
</head>
<!-- <body class="show-popup_widget"> -->
<body>
  <div class="container">
    <div class="review-block" data-show-dk="12" data-show-bm="2" data-loadmore-dk="4" data-loadmore-mb="2">
      <div class="review-head">
        <h2>19 Reviews</h2>
      </div>
      <div class="sortable__nav nav">
        <div data-mansony-link="all" class="nav__link">All</div>
        <div data-mansony-link="video" class="nav__link">Video</div>
        <div data-mansony-link="picture" class="nav__link">Picture</div>
      </div>
      <div class="review-items mansony-default">
        <div class="review-item" data-img-url="imgs/item-1.jpg" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-1.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item" data-video-url="https://immsonline.wistia.com/medias/i6dk6fth8t" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-2.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Video.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-img-url="imgs/item-3.jpg" data-video-url="https://immsonline.wistia.com/medias/i6dk6fth8t" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-3.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-video-url="https://immsonline.wistia.com/medias/i6dk6fth8t" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-4.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Video.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-5.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-6.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-7.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-8.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-9.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-1.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-2.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-3.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-4.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-5.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-6.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-7.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="video">
          <div class="thumb">
            <img src="imgs/item-8.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
        <div class="review-item hidden" data-gjs-type="reviewItem" data-mansony-el="picture">
          <div class="thumb">
            <img src="imgs/item-9.jpg" alt="">
          </div>
          <div class="content">
            <div class="name">Joe M.</div>
            <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
            <div class="desc">Much nicer than I expected</div>
          </div>
        </div>
      </div>
      <div class="loadmore-wrap">
        <div class="loadmore-btn">Load More</div>
      </div>

      <a href="" data-gjs-removable="false" data-gjs-copyable="false" class="show-popup hidden">Review Popup</a>
      <div class="popup_widget" id="abc">
        <div class="popup_widget_outer popup_widget_outer--scrollable popup_widget_outer--centered"
          data-gjs-custom-name="Outer">
          <div class="popup_widget_inner" data-gjs-custom-name="Inner">
            <div class="close close-popup" data-gjs-custom-name="Close" data-gjs-removable="false">
              <img src="https://d16hdrba6dusey.cloudfront.net/sitecommon/images/icon-close-white.svg" class="no-lazy"
                alt="" />
            </div>
            <div class="popup_widget_content" data-gjs-custom-name="Content">
              <div class="popup_widget_body" data-gjs-custom-name="Body">
                <!-- <div class="popup_widget_header" data-gjs-custom-name="Header Popup">
                      <div>Header</div>
                    </div> -->
                <div class="popup_widget_main" data-gjs-custom-name="Main Popup" data-gjs-removable="false">
                  <div class="review-item">
                    <div class="thumb">
                      <img src="https://i.gyazo.com/8e757354b2917abe5dde088cbc82dae6.jpg" alt="">
                    </div>
                    <div class="content">
                      <div class="name">Joe M.</div>
                      <img src="https://i.gyazo.com/33796d1ce75a44b9e639d6663a8f5cb8.png" alt="">
                      <div class="desc">Much nicer than I expected <br></div>
                      Thanks so much for the quick shipping
                    </div>
                  </div>
                </div>
                <!-- <div class="popup_widget_footer" data-gjs-custom-name="Footer Popup" data-gjs-type="footerPopup">
                      <div>Footer</div>
                    </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/widget_popup_global.js"></script>
    <script src="js/mansony.min.js"></script>
    <script>
      const element = document.querySelector('.review-block');
      const reviewItemElms = element.querySelectorAll('.review-item');

      const showDk = Number(element.getAttribute('data-show-dk'));
      const showMb = Number(element.getAttribute('data-show-mb'));
      const loadMoreDk = Number(element.getAttribute('data-loadmore-dk'));
      const loadMoreMb = Number(element.getAttribute('data-loadmore-mb'));
      const loadMoreBtn = element.querySelector('.loadmore-btn');

      for (let i = 0, n = reviewItemElms.length; i < n; i++) {
        let countShowItems = showDk;
        if (window.innerWidth < 768) {
          countShowItems = showMb;
        }
        if (i < countShowItems) {
          reviewItemElms[i].classList.remove('hidden');
        }
      }

      const newMansony = new mansony({
        parent: element.querySelector('.mansony-default'),
        links: element.querySelectorAll('[data-mansony-link]'),
        active: 'is-active',
        margin: 30,
        dataLink: 'video',
        responsive: {
          1023: {
            columns: 4,
            margin: 30
          },
          767: {
            columns: 3,
            margin: 30
          },
          575: {
            columns: 2,
            margin: 20
          },
          0: {
            columns: 1,
            margin: 20
          }
        },
        fadeDuration: {
          in: 300,
          out: 0
        }
      });

      loadMoreBtn.addEventListener('click', (e) => {
        let countLoadMoreItems = loadMoreDk;
        if (window.innerWidth < 768) {
          countLoadMoreItems = loadMoreMb;
        }
        const nextElms = element.querySelectorAll('.review-item.hidden');
        if (nextElms.length <= countLoadMoreItems) {
          e.currentTarget.classList.add('hidden');
        }
        for(let j = 0, m = nextElms.length; j < m; j++) {
          if (j < countLoadMoreItems) {
            nextElms[j].classList.remove('hidden');
          }
        }

        // Rerender Mansony
        newMansony.winWidth = window.innerWidth;
        newMansony.filterElements(() => {
          newMansony.setBlockWidth(() => {
            newMansony.orderElements();
          });
        });
      });

      reviewItemElms.forEach((item) => {
        item.addEventListener('click', () => {
          // TODO - Render and Show Popup
        });
      });
    </script>
  </div>
</body>
</html>
